# =============================================================================
# Followup AI Backend - Cloud Run Environment Variables
# =============================================================================
# 
# PRODUCTION DEPLOYMENT GUIDE:
# 
# 1. Store secrets in GCP Secret Manager (not as env vars):
#    gcloud secrets create DATABASE_URL --data-file=-
#    gcloud secrets create STYTCH_SECRET --data-file=-
#    etc.
#
# 2. Non-secret env vars go in Cloud Run configuration
#
# 3. Update CORS_ALLOWED_ORIGINS with your Replit + production domains
#
# 4. Configure Stytch Dashboard:
#    - Add Cloud Run URL to Redirect URLs
#    - Add domain to Authorized Domains for reCAPTCHA
#
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE (Store in Secret Manager: DATABASE_URL)
# -----------------------------------------------------------------------------
# Neon PostgreSQL connection string
DATABASE_URL=postgresql://user:password@your-neon-host.neon.tech:5432/followupai?sslmode=require

# -----------------------------------------------------------------------------
# STYTCH AUTHENTICATION (Store in Secret Manager)
# -----------------------------------------------------------------------------
# Get these from your Stytch Dashboard: https://stytch.com/dashboard
STYTCH_PROJECT_ID=project-live-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
STYTCH_SECRET=secret-live-xxxxxx...
STYTCH_PUBLIC_TOKEN=public-token-live-xxxxxx...
STYTCH_ENV=live

# -----------------------------------------------------------------------------
# STYTCH RECAPTCHA CONFIGURATION
# -----------------------------------------------------------------------------
# Configure in Stytch Dashboard (no env vars needed):
# 1. Go to Dashboard > Configuration > reCAPTCHA
# 2. Add your Cloud Run domain to "Authorized Domains"
# 3. Enable reCAPTCHA for Magic Links / OTP as needed
#
# The frontend Stytch SDK will automatically handle reCAPTCHA verification
# when configured in the dashboard.

# -----------------------------------------------------------------------------
# SESSION & SECURITY (Store in Secret Manager)
# -----------------------------------------------------------------------------
SESSION_SECRET=generate-32-char-random-string-here
DEV_MODE_SECRET=generate-32-char-random-string-for-dev-mode

# -----------------------------------------------------------------------------
# OPENAI (Store in Secret Manager)
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-openai-api-key

# HIPAA Compliance flags (set as env vars, not secrets)
OPENAI_BAA_SIGNED=true
OPENAI_ZDR_ENABLED=true
OPENAI_ENTERPRISE=true

# -----------------------------------------------------------------------------
# STRIPE PAYMENTS (Store in Secret Manager)
# -----------------------------------------------------------------------------
STRIPE_API_KEY=sk_live_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_CONNECT_CLIENT_ID=ca_your-connect-client-id

# -----------------------------------------------------------------------------
# CORS CONFIGURATION (Set as env var)
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
# Include your Replit frontend URL and production domain
CORS_ALLOWED_ORIGINS=https://your-replit-app.replit.app,https://followup.ai

# -----------------------------------------------------------------------------
# APPLICATION URLS (Set as env vars)
# -----------------------------------------------------------------------------
# APP_BASE_URL = Your Cloud Run service URL (set after first deploy)
APP_BASE_URL=https://followupai-backend-xxxxx.run.app

# FRONTEND_BASE_URL = Your Replit frontend URL
FRONTEND_BASE_URL=https://your-replit-app.replit.app

# -----------------------------------------------------------------------------
# GCP CONFIGURATION (Set as env vars)
# -----------------------------------------------------------------------------
GCP_PROJECT_ID=your-gcp-project-id
GCP_REGION=us-central1

# Cloud Storage (if using)
GCS_BUCKET_NAME=followupai-uploads

# KMS (if using)
GCP_KMS_KEY_RING_ID=followupai-keyring
GCP_KMS_CRYPTO_KEY_ID=hipaa-encryption-key

# -----------------------------------------------------------------------------
# VIDEO CONFERENCING - DAILY.CO (Store in Secret Manager)
# -----------------------------------------------------------------------------
DAILY_API_KEY=your-daily-api-key
DAILY_DOMAIN=followupai.daily.co

# -----------------------------------------------------------------------------
# MONITORING (Set as env vars or secrets)
# -----------------------------------------------------------------------------
SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# REDIS (Optional - for caching/sessions)
# -----------------------------------------------------------------------------
REDIS_URL=redis://your-redis-host:6379

# -----------------------------------------------------------------------------
# RUNTIME CONFIGURATION (Set as env vars)
# -----------------------------------------------------------------------------
NODE_ENV=production
WORKERS=2
PORT=8080

# =============================================================================
# STYTCH DASHBOARD CONFIGURATION CHECKLIST
# =============================================================================
#
# After deploying to Cloud Run, update your Stytch Dashboard:
#
# 1. REDIRECT URLs (Dashboard > Configuration > Redirect URLs):
#    - Add: https://your-cloud-run-url.run.app/api/auth/callback
#    - Add: https://your-replit-app.replit.app/api/auth/callback
#    - Add: https://followup.ai/api/auth/callback (production domain)
#
# 2. AUTHORIZED DOMAINS (Dashboard > Configuration > Authorized domains):
#    - Add your Cloud Run domain (without https://)
#    - Add your Replit domain
#    - Add your production domain
#
# 3. RECAPTCHA (Dashboard > Configuration > reCAPTCHA):
#    - Enable for Magic Links
#    - Enable for SMS OTP (if using)
#    - Domains will use the Authorized Domains list
#
# 4. M2M CLIENTS (Dashboard > API Keys > M2M clients):
#    - Create M2M client for server-to-server auth if needed
#    - Store credentials in Secret Manager:
#      STYTCH_M2M_CLIENT_ID, STYTCH_M2M_CLIENT_SECRET
#
# =============================================================================

# =============================================================================
# FRONTEND CONFIGURATION (Replit Secrets)
# =============================================================================
#
# Set these in your Replit frontend project's Secrets:
#
# VITE_API_URL=https://your-cloud-run-url.run.app
# VITE_STYTCH_PUBLIC_TOKEN=public-token-live-xxxxxx...
#
# =============================================================================
